-- 게시판글
ALTER TABLE `ARTICLE`
	DROP FOREIGN KEY `FK_USERS_TO_ARTICLE`; -- 회원 -> 게시판글

-- 댓글
ALTER TABLE `COMMENT`
	DROP FOREIGN KEY `FK_ARTICLE_TO_COMMENT`; -- 게시판글 -> 댓글

-- 댓글
ALTER TABLE `COMMENT`
	DROP FOREIGN KEY `FK_USERS_TO_COMMENT`; -- 회원 -> 댓글

-- 이메일리스트
CREATE TABLE `EMAIL_LIST` (
	`no`         INTEGER      NOT NULL COMMENT '번호', -- 번호
	`first_name` varchar(24)  NULL     COMMENT '성', -- 성
	`last_name`  varchar(100) NULL     COMMENT '이름', -- 이름
	`email`      varchar(255) NULL     COMMENT '이메일' -- 이메일
)
COMMENT '이메일리스트';

-- 이메일리스트
ALTER TABLE `EMAIL_LIST`
	ADD CONSTRAINT `PK_EMAIL_LIST` -- 이메일리스트 기본키
		PRIMARY KEY (
			`no` -- 번호
		);

ALTER TABLE `EMAIL_LIST`
	MODIFY COLUMN `no` INTEGER NOT NULL AUTO_INCREMENT COMMENT '번호';

-- 회원
CREATE TABLE `USERS` (
	`no`        INTEGER      NOT NULL COMMENT '번호', -- 번호
	`name`      varchar(50)  NULL     COMMENT '이름', -- 이름
	`email`     varchar(200) NULL     COMMENT '이메일', -- 이메일
	`password`  varchar(48)  NULL     COMMENT '비밀번호', -- 비밀번호
	`gender`    varchar(10)  NULL     COMMENT '성별', -- 성별
	`join_date` DATETIME     NULL     COMMENT '가입일' -- 가입일
)
COMMENT '회원';

-- 회원
ALTER TABLE `USERS`
	ADD CONSTRAINT `PK_USERS` -- 회원 기본키
		PRIMARY KEY (
			`no` -- 번호
		);

ALTER TABLE `USERS`
	MODIFY COLUMN `no` INTEGER NOT NULL AUTO_INCREMENT COMMENT '번호';

-- 게시판글
CREATE TABLE `ARTICLE` (
	`no`        INTEGER       NOT NULL COMMENT '번호', -- 번호
	`writer_no` INTEGER       NULL     DEFAULT 0 COMMENT '작성자번호', -- 작성자번호
	`title`     varchar(100)  NULL     COMMENT '제목', -- 제목
	`content`   varchar(2000) NULL     COMMENT '내용', -- 내용
	`hits`      INTEGER       NULL     COMMENT '조회수', -- 조회수
	`reg_date`  DATETIME      NULL     COMMENT '작성일', -- 작성일
	`group_no`  INTEGER       NULL     DEFAULT 0 COMMENT '그룹번호', -- 그룹번호
	`order_no`  INTEGER       NULL     COMMENT '그룹내순서', -- 그룹내순서
	`depth`     INTEGER       NULL     COMMENT '깊이' -- 깊이
)
COMMENT '게시판글';

-- 게시판글
ALTER TABLE `ARTICLE`
	ADD CONSTRAINT `PK_ARTICLE` -- 게시판글 기본키
		PRIMARY KEY (
			`no` -- 번호
		);

ALTER TABLE `ARTICLE`
	MODIFY COLUMN `no` INTEGER NOT NULL AUTO_INCREMENT COMMENT '번호';

-- 댓글
CREATE TABLE `COMMENT` (
	`no`         INTEGER      NOT NULL COMMENT '번호', -- 번호
	`article_no` INTEGER      NULL     COMMENT '글 번호', -- 글 번호
	`writer_no`  INTEGER      NULL     COMMENT '작성자 번호', -- 작성자 번호
	`reg_date`   DATETIME     NULL     COMMENT '작성일', -- 작성일
	`content`    VARCHAR(255) NULL     COMMENT '내용' -- 내용
)
COMMENT '댓글';

-- 댓글
ALTER TABLE `COMMENT`
	ADD CONSTRAINT `PK_COMMENT` -- 댓글 기본키
		PRIMARY KEY (
			`no` -- 번호
		);

ALTER TABLE `COMMENT`
	MODIFY COLUMN `no` INTEGER NOT NULL AUTO_INCREMENT COMMENT '번호';

-- 방명록
CREATE TABLE `GUESTBOOK` (
	`no`       INTEGER       NOT NULL COMMENT '번호', -- 번호
	`name`     varchar(120)  NULL     COMMENT '작성자이름', -- 작성자이름
	`password` varchar(48)   NULL     COMMENT '비밀번호', -- 비밀번호
	`content`  varchar(2000) NULL     COMMENT '글 내용', -- 글 내용
	`reg_date` DATETIME      NULL     COMMENT '등록일' -- 등록일
)
COMMENT '방명록';

-- 방명록
ALTER TABLE `GUESTBOOK`
	ADD CONSTRAINT `PK_GUESTBOOK` -- 방명록 기본키
		PRIMARY KEY (
			`no` -- 번호
		);

ALTER TABLE `GUESTBOOK`
	MODIFY COLUMN `no` INTEGER NOT NULL AUTO_INCREMENT COMMENT '번호';

-- 게시판글
ALTER TABLE `ARTICLE`
	ADD CONSTRAINT `FK_USERS_TO_ARTICLE` -- 회원 -> 게시판글
		FOREIGN KEY (
			`writer_no` -- 작성자번호
		)
		REFERENCES `USERS` ( -- 회원
			`no` -- 번호
		)
		ON DELETE SET DEFAULT
		ON UPDATE SET DEFAULT;

-- 댓글
ALTER TABLE `COMMENT`
	ADD CONSTRAINT `FK_ARTICLE_TO_COMMENT` -- 게시판글 -> 댓글
		FOREIGN KEY (
			`article_no` -- 글 번호
		)
		REFERENCES `ARTICLE` ( -- 게시판글
			`no` -- 번호
		)
		ON DELETE CASCADE
		ON UPDATE CASCADE;

-- 댓글
ALTER TABLE `COMMENT`
	ADD CONSTRAINT `FK_USERS_TO_COMMENT` -- 회원 -> 댓글
		FOREIGN KEY (
			`writer_no` -- 작성자 번호
		)
		REFERENCES `USERS` ( -- 회원
			`no` -- 번호
		)
		ON DELETE SET DEFAULT
		ON UPDATE SET DEFAULT;