<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="user"><!-- namespace를 쓰는 이유는 각 Dao마다 getList와 같이 겹치는 행동이 
		있기 때문이다. -->
		<select id="getUserByIdAndPassword" parameterType="map" resultType="uservo">
			<![CDATA[
				select no, name, id
				from user
				where id=#{id}
					and password=password(#{password})
			]]>
		</select>
		
		<insert id="insert" parameterType="uservo">
			<![CDATA[
				insert into user(
					no, 
					id, 
					name, 
					password, 
					join_date
				)
				values(
					null,
					#{id},
					#{name},
					password(#{password}),
					now()
				)
			]]>
			<selectKey keyProperty="no" resultType="Long" order="AFTER">
			<![CDATA[
				select last_insert_id()
			]]>
			</selectKey>
		</insert>
</mapper>